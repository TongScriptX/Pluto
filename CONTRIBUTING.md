# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ å¯¹ Pluto é¡¹ç›®çš„è´¡çŒ®ï¼ä¸ºäº†ä¿æŒä»£ç è´¨é‡å’Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒã€‚

## ğŸ“‹ æäº¤è§„èŒƒ

### æäº¤æ¶ˆæ¯æ ¼å¼

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼Œæ‰€æœ‰æäº¤æ¶ˆæ¯å¿…é¡»éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```
<ç±»å‹>[(å¯é€‰èŒƒå›´)]: <ç®€çŸ­æè¿°>

[å¯é€‰æ­£æ–‡]

[å¯é€‰è„šæ³¨]
```

#### æ ¼å¼è¦æ±‚

- **æ ‡é¢˜è¡Œ**ï¼š`<ç±»å‹>: <æè¿°>` æˆ– `<ç±»å‹>(èŒƒå›´): <æè¿°>`
- **æœ€å¤§é•¿åº¦**ï¼šæ ‡é¢˜ä¸è¶…è¿‡ 72 å­—ç¬¦
- **æè¿°æ ¼å¼**ï¼šä½¿ç”¨å°å†™å¼€å¤´ï¼Œä¸è¦ä»¥å¥å·ç»“å°¾
- **æ­£æ–‡**ï¼šä¸æ ‡é¢˜ç©ºä¸€è¡Œï¼Œæ¯è¡Œä¸è¶…è¿‡ 72 å­—ç¬¦
- **è„šæ³¨**ï¼šä¸æ­£æ–‡ç©ºä¸€è¡Œï¼Œç”¨äºå¼•ç”¨ issue æˆ–è¯´æ˜ç ´åæ€§å˜æ›´

### æäº¤ç±»å‹

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat: æ·»åŠ è‡ªåŠ¨é©¾é©¶åŠŸèƒ½` |
| `fix` | ä¿®å¤ç¼ºé™· | `fix: ä¿®å¤è½¦è¾†ç¢°æ’æ£€æµ‹é—®é¢˜` |
| `docs` | æ–‡æ¡£å˜æ›´ | `docs: æ›´æ–° API æ–‡æ¡£` |
| `style` | ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“é€»è¾‘ï¼‰ | `style: æ ¼å¼åŒ–ä»£ç ç¼©è¿›` |
| `refactor` | é‡æ„ï¼ˆä¸å¢åŠ åŠŸèƒ½ä¹Ÿä¸ä¿®å¤ç¼ºé™·ï¼‰ | `refactor: é‡æ„è½¦è¾†ç®¡ç†æ¨¡å—` |
| `test` | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ ç¢°æ’æ£€æµ‹å•å…ƒæµ‹è¯•` |
| `chore` | æ„å»ºã€ä¾èµ–ã€å·¥å…·é…ç½®ç­‰ | `chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf: ä¼˜åŒ–è·¯å¾„æŸ¥æ‰¾ç®—æ³•` |
| `ci` | CI/CD é…ç½®å˜æ›´ | `ci: æ·»åŠ è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ` |
| `build` | æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–å˜æ›´ | `build: å‡çº§æ„å»ºå·¥å…·ç‰ˆæœ¬` |
| `revert` | å›æ»šä¹‹å‰çš„æäº¤ | `revert: å›æ»š feat: xxx` |
| `hotfix` | ç”Ÿäº§ç¯å¢ƒç´§æ€¥ä¿®å¤ | `hotfix: ä¿®å¤æœåŠ¡å™¨å´©æºƒé—®é¢˜` |
| `release` | ç‰ˆæœ¬å‘å¸ƒ | `release: v1.0.0` |

### æäº¤ç¤ºä¾‹

#### âœ… æ­£ç¡®ç¤ºä¾‹

```bash
# ç®€å•æäº¤
feat: æ·»åŠ è½¦è¾†è‡ªåŠ¨é©¾é©¶åŠŸèƒ½

# å¸¦èŒƒå›´çš„æäº¤
fix(ui): ä¿®å¤æŒ‰é’®ç‚¹å‡»æ— å“åº”é—®é¢˜

# å¸¦è¯¦ç»†æ­£æ–‡çš„æäº¤
feat: æ·»åŠ è°ƒè¯•æ¨¡å¼åŠŸèƒ½

- æ·»åŠ  DEBUG_MODE å˜é‡æ§åˆ¶è°ƒè¯•è¾“å‡º
- åˆ›å»º debugPrint å‡½æ•°åŒ…è£… print
- å°†æ‰€æœ‰ print è¯­å¥æ›¿æ¢ä¸º debugPrint
- è°ƒè¯•ä¿¡æ¯ä»…åœ¨ DEBUG_MODE ä¸º true æ—¶è¾“å‡º

# ç ´åæ€§å˜æ›´
feat!: é‡æ„ API æ¥å£

BREAKING CHANGE: API ç«¯ç‚¹ä» /v1 è¿ç§»åˆ° /v2

# å…³è” issue
fix: ä¿®å¤å†…å­˜æ³„æ¼é—®é¢˜

Closes #123
```

#### âŒ é”™è¯¯ç¤ºä¾‹

```bash
# ç¼ºå°‘ç±»å‹
æ·»åŠ æ–°åŠŸèƒ½

# ç±»å‹åç¼ºå°‘å†’å·
feat æ·»åŠ æ–°åŠŸèƒ½

# æè¿°ä»¥å¤§å†™å¼€å¤´
feat: Add new feature

# æè¿°ä»¥å¥å·ç»“å°¾
feat: æ·»åŠ æ–°åŠŸèƒ½ã€‚

# æ ‡é¢˜è¿‡é•¿
feat: è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸éå¸¸é•¿çš„æäº¤æ¶ˆæ¯è¶…è¿‡äº†ä¸ƒåäºŒä¸ªå­—ç¬¦çš„é™åˆ¶

# ä½¿ç”¨äº†ä¸å­˜åœ¨çš„ç±»å‹
update: æ›´æ–°ä»£ç 
```

## ğŸŒ¿ åˆ†æ”¯å‘½åè§„èŒƒ

åˆ†æ”¯åç§°å¿…é¡»éµå¾ª `<ç±»å‹>/<æè¿°>` æ ¼å¼ï¼š

### æ ¼å¼è¦æ±‚

- **æ ¼å¼**ï¼š`<ç±»å‹>/<ticket>-<æè¿°>`
- **å­—ç¬¦**ï¼šä»…ä½¿ç”¨å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œç‚¹
- **ç±»å‹**ï¼šä¸æäº¤ç±»å‹ä¸€è‡´

### åˆ†æ”¯ç¤ºä¾‹

```bash
# åŠŸèƒ½åˆ†æ”¯
feat/auto-pilot
feat/issue-123-vehicle-system

# ä¿®å¤åˆ†æ”¯
fix/collision-detection
fix/gh-456-memory-leak

# æ–‡æ¡£åˆ†æ”¯
docs/update-readme
docs/api-reference

# å…¶ä»–åˆ†æ”¯
refactor/core-engine
chore/update-dependencies
hotfix/server-crash
```

### ä¿æŠ¤åˆ†æ”¯

ä»¥ä¸‹åˆ†æ”¯å—ä¿æŠ¤ï¼Œç›´æ¥æ¨é€æ—¶ä¸æ£€æŸ¥å‘½åè§„èŒƒï¼š
- `main` - ä¸»åˆ†æ”¯
- `develop` - å¼€å‘åˆ†æ”¯

## ğŸ” è‡ªåŠ¨æ£€æŸ¥

æ¯æ¬¡æ¨é€å’Œ PR æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š

1. **åˆ†æ”¯å‘½å** - æ˜¯å¦ç¬¦åˆ `<ç±»å‹>/<æè¿°>` æ ¼å¼
2. **æäº¤æ¶ˆæ¯** - æ˜¯å¦ç¬¦åˆ Conventional Commits è§„èŒƒ
3. **åˆå¹¶æäº¤** - PR ä¸­æ˜¯å¦åŒ…å« merge commitsï¼ˆå»ºè®®ä½¿ç”¨ rebaseï¼‰

## ğŸ› ï¸ æœ¬åœ°é…ç½®

### å®‰è£… commitlintï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£…ä¾èµ–
npm install --save-dev @commitlint/cli @commitlint/config-conventional

# å®‰è£… husky
npm install --save-dev husky

# é…ç½® husky
npx husky install
npx husky add .husky/commit-msg 'npx --no -- commitlint --edit "$1"'
```

### ä½¿ç”¨ pre-commitï¼ˆå¯é€‰ï¼‰

é¡¹ç›®å·²é…ç½® `.pre-commit-config.yaml`ï¼Œå®‰è£…åå¯åœ¨æäº¤å‰è‡ªåŠ¨æ£€æŸ¥ï¼š

```bash
pip install pre-commit
pre-commit install
```

## ğŸ“ æäº¤æµç¨‹

### æ ‡å‡†æµç¨‹

```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feat/new-feature

# 2. è¿›è¡Œå¼€å‘
# ... ä¿®æ”¹ä»£ç  ...

# 3. æš‚å­˜æ›´æ”¹
git add .

# 4. æäº¤ï¼ˆéµå¾ªè§„èŒƒï¼‰
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"

# 5. æ¨é€åˆ°è¿œç¨‹
git push origin feat/new-feature

# 6. åˆ›å»º Pull Request
```

### ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤

å¦‚æœæäº¤æ¶ˆæ¯ä¸ç¬¦åˆè§„èŒƒï¼š

```bash
# ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤æ¶ˆæ¯
git commit --amend -m "feat: æ­£ç¡®çš„æäº¤æ¶ˆæ¯"

# å¼ºåˆ¶æ¨é€ï¼ˆå¦‚æœå·²æ¨é€ï¼‰
git push --force
```

### äº¤äº’å¼ rebase

ä¿®æ”¹å¤šä¸ªæäº¤ï¼š

```bash
# äº¤äº’å¼ rebase æœ€è¿‘ 3 æ¬¡æäº¤
git rebase -i HEAD~3

# åœ¨ç¼–è¾‘å™¨ä¸­å°†è¦ä¿®æ”¹çš„æäº¤æ ‡è®°ä¸º 'reword'
# ä¿å­˜åä¼šé€ä¸ªç¼–è¾‘æäº¤æ¶ˆæ¯

# å¼ºåˆ¶æ¨é€
git push --force
```

## ğŸš« å¸¸è§é”™è¯¯

### 1. ç¼ºå°‘æäº¤ç±»å‹

```bash
# âŒ é”™è¯¯
æ·»åŠ æ–°åŠŸèƒ½

# âœ… æ­£ç¡®
feat: æ·»åŠ æ–°åŠŸèƒ½
```

### 2. ç±»å‹åç¼ºå°‘å†’å·å’Œç©ºæ ¼

```bash
# âŒ é”™è¯¯
featæ·»åŠ æ–°åŠŸèƒ½
feat:æ·»åŠ æ–°åŠŸèƒ½

# âœ… æ­£ç¡®
feat: æ·»åŠ æ–°åŠŸèƒ½
```

### 3. æè¿°æ ¼å¼é”™è¯¯

```bash
# âŒ é”™è¯¯
feat: Add new feature  # ä½¿ç”¨è‹±æ–‡ä½†é¡¹ç›®ä½¿ç”¨ä¸­æ–‡
feat: æ·»åŠ æ–°åŠŸèƒ½ã€‚     # ä»¥å¥å·ç»“å°¾

# âœ… æ­£ç¡®
feat: æ·»åŠ æ–°åŠŸèƒ½
```

### 4. åˆ†æ”¯å‘½åé”™è¯¯

```bash
# âŒ é”™è¯¯
git checkout -b NewFeature        # å¤§å†™å­—æ¯
git checkout -b add_new_feature   # ä¸‹åˆ’çº¿
git checkout -b feature           # ç¼ºå°‘ç±»å‹å‰ç¼€

# âœ… æ­£ç¡®
git checkout -b feat/new-feature
```

## ğŸ“š å‚è€ƒèµ„æº

- [Conventional Commits è§„èŒƒ](https://www.conventionalcommits.org/)
- [commitlint æ–‡æ¡£](https://commitlint.js.org/)
- [Git åˆ†æ”¯ç®¡ç†æœ€ä½³å®è·µ](https://nvie.com/posts/a-successful-git-branching-model/)

## ğŸ’¡ æç¤º

- æäº¤å‰ä½¿ç”¨ `git log --oneline` æŸ¥çœ‹æœ€è¿‘çš„æäº¤æ ¼å¼
- ä½¿ç”¨ `git commit --amend` ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤
- å¤§å‹åŠŸèƒ½å»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªå°æäº¤ï¼Œæ¯ä¸ªæäº¤ä¿æŒåŸå­æ€§
- å®šæœŸä» `main` åˆ†æ”¯ rebase ä»¥ä¿æŒåˆ†æ”¯æœ€æ–°

## â“ é—®é¢˜åé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
- æäº¤ [Issue](https://github.com/TongScriptX/Pluto/issues)
- åœ¨ [Discussions](https://github.com/TongScriptX/Pluto/discussions) ä¸­è®¨è®º

---

å†æ¬¡æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼ğŸ‰
